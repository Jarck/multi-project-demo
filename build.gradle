/*
 * This file was generated by the Gradle 'init' task.
 */
buildscript {
    ext {
        springBootVersion = '2.0.4.RELEASE'
    }

    repositories {
        mavenLocal()
        maven {
            url "http://repo.maven.apache.org/maven2"
        }
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }

    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
    }
}

allprojects {
    group 'com.spring'
    version '1.0-SNAPSHOT'

    apply plugin: 'java'
    apply plugin: 'idea'

    apply plugin: 'checkstyle'

    checkstyle {
        showViolations = true
        ignoreFailures = false
        toolVersion = 8.2
    }
}

subprojects {
    apply plugin: 'io.spring.dependency-management'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    ext {
        mybatisVersion = '1.3.1'
        lombokVersion = '1.18.6'
        dbSetupVersion = '2.1.0'
        pagehelperVersion = '1.2.3'
    }
    
    repositories {
        mavenLocal()
        maven {
            url "http://repo.maven.apache.org/maven2"
        }
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }

    dependencyManagement {
        imports {
            mavenBom "org.springframework.boot:spring-boot-starter-parent:${springBootVersion}"
            mavenBom org.springframework.boot.gradle.plugin.SpringBootPlugin.BOM_COORDINATES
        }
    }
    
    dependencies {
        compileOnly "org.projectlombok:lombok:${lombokVersion}"
        annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
    }

    test {
        filter {
            includeTestsMatching "*Test"
        }
    }

    // 编码改为 UTF-8, 否则编译源码的时候会出错
    [compileJava, compileTestJava, javadoc]*.options*.encoding = 'UTF-8'
}
